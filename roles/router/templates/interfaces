# interfaces(5) file used by ifup(8) and ifdown(8)
# Include files from /etc/network/interfaces.d:
source-directory /etc/network/interfaces.d

# The loopback network interface
auto lo
iface lo inet loopback

# Red muy interna
auto enp1s0
iface enp1s0 inet static
    address {{ gateway_dhcp }}
    netmask {{ mascara_dhcp }}

# Red interna, donde toma la config con ansible
auto enp7s0
iface enp7s0 inet static
    address {{config_address}}
    netmask {{config_netmask}}

#VAGRANT-BEGIN
# The contents below are automatically generated by Vagrant. Do not modify.
#red bridge
auto enp8s0
iface enp8s0 inet dhcp
#VAGRANT-END

#IP-TABLES
up iptables -t nat -A POSTROUTING -o {{ interfaz_externa_router }} -s {{ direccion_red }} -j MASQUERADE
down iptables -t nat -D POSTROUTING -o {{ interfaz_externa_router }} -s {{ direccion_red }} -j MASQUERADE

up iptables -t nat -A PREROUTING -p tcp --dport 80 -i {{ interfaz_externa_router }} -j DNAT --to {{ ip_sweb }}
down iptables -t nat -D PREROUTING -p tcp --dport 80 -i {{ interfaz_externa_router }} -j DNAT --to {{ ip_sweb }}

